<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Soul Mate | Survey</title>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<link href="https://fonts.googleapis.com/css?family=Rock+Salt" rel="stylesheet"> 
	<link href='style.css' rel="stylesheet"> 
</head>
<body>

	<div class='container'>
		<div class="jumbotron">
			<h1 class='your'>Y<span class="glyphicon glyphicon-heart"></span>ur</h1> 
			<h1 class='mate'>S<span class="glyphicon glyphicon-heart-empty"></span>ul Mate</h1> 
			<h1>Please fill in the forms below and <br> begin answering the survey questions.</h1>
			<p><a class="btn btn-lg" href="/home" role="button"><span class="glyphicon glyphicon-home"></span> Home</a></p>
		</div>
	</div> <!-- container -->

	<div class='container'>
		<div class="jumbotron" id='surveyJT'>
			<h1 class='headerOne'>About You</h1>
			<hr>
				<div class='row'>
					<div class='col-lg-6'>
						<form role="form">
			            <h3>Name (Required)</h3>
			            <input type="text" name="" id="name" class="form-control" required>
					</div>
					<div class='col-lg-6'>
			            <h3>Link to Photo Image (Required)</h3>
			            <input type="text" name="" id="photo" class="form-control" required>
						</form>
					</div>
		        </div> <!-- row -->

                <hr class='inputPadding'>

				<h1 class='headerTwo'>Survey Questions</h1>

		        <h3>I want kids.</h3>
                <select data-placeholder="" class="chosen-select" id="QuestionOne">
                    <option selected="selected" value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

		        <h3>Age ain't nothing but a number.</h3>
                <select data-placeholder="" class="chosen-select" id="QuestionTwo">
                    <option selected="selected" value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

		        <h3>Wearing underwear in reverse to prolong laundry is normal.</h3>
                <select data-placeholder="" class="chosen-select" id="QuestionThree">
                    <option selected="selected" value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
                
                <h3>Courtesy flushes only apply in public.</h3>                
                <select data-placeholder="" class="chosen-select" id="QuestionFour">
                    <option selected="selected" value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h3>Brushing teeth should be an option.</h3>
                <select data-placeholder="" class="chosen-select" id="QuestionFive">
                    <option selected="selected" value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h3>Anniversaries serve no purpose.</h3>
                <select data-placeholder="" class="chosen-select" id="QuestionSix">
                    <option selected="selected" value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h3>Valentine day is overrated.</h3>
                <select data-placeholder="" class="chosen-select" id="QuestionSeven">
                    <option selected="selected" value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h3>It's okay to fart in public.</h3>
                <select data-placeholder="" class="chosen-select" id="QuestionEight">
                    <option selected="selected" value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h3>I'm attracted to males.</h3>
                <select data-placeholder="" class="chosen-select" id="QuestionNine">
                    <option selected="selected" value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>

                <h3>I'm attracted to females.</h3>
                <select data-placeholder="" class="chosen-select" id="QuestionTen">
                    <option selected="selected" value=""></option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select> 
                
                <div>
                <button type="submit" id="submit" class="btn btn-lrg"><span class="glyphicon glyphicon-heart-empty"></span> Click to Meet Your Soul Mate <span class="glyphicon glyphicon-heart-empty"></span</button>
                </div>                            
		</div> <!-- Jumbotron -->
	</div> <!-- container -->	

    <!-- Modal -->
    <div id="resultsModal" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">X</button>
            <h2 class="modal-title"><strong>Your Soul Mate</strong></h2>
          </div>
          <div class="modal-body">
            <h2 id="matchName"></h2>
            <img id="matchImg" src ="" alt="" height="350" width="300">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" id="closeModal" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div> <!-- modal dialog -->
    </div> <!-- results modal -->
    
    <!-- Jquery CDN -->
    <script src="http://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
    
    <!-- Minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <script>
// Grab the URL of the website
var currentURL = window.location.origin;
// Capture the form inputs
$("#submit").on("click", function(){
  event.preventDefault();

    if( ($('#name').val().trim() !== "") && ($('#photo').val().trim() !== "") ) {
        // Create an object for the user's data
        var userData = {
            name: $("#name").val(),
            photo: $("#photo").val(),
            scores: [$("#QuestionOne").val(), $("#QuestionTwo").val(), $("#QuestionThree").val(), $("#QuestionFour").val(), $("#QuestionFive").val(), $("#QuestionSix").val(), $("#QuestionSeven").val(), $("#QuestionEight").val(), $("#QuestionNine").val(), $("#QuestionTen").val(), ]
        }


        // AJAX post the data to the soul mate API.
        $.post(currentURL + "/api/friends", userData, function(data){

          // Grab the result from the AJAX post so that the best match's name and photo are displayed.
          $("#matchName").text(data.name);
          $('#matchImg').attr("src", data.photo);

          // Show the modal with the best match
          $("#resultsModal").modal('toggle');
          // clear the input fields in the form
          $("#name").val("");
          $("#photo").val("");

        });
    } else {
        $(".modal-title").text("Missing required information");
        $(".modal-body").html("<h4>Please complete the entire survey before submitting</h4>");
        $("#resultsModal").modal('toggle');

    }
    return false;
});

// modal logic
$('#closeModal').click(function() {
    $.get('/',function(req,res){
    location.replace(res);
    })
});

</script>
</body>
</html>